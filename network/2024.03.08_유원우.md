# TCP와 UDP의 차이에 대해 설명해 주세요.

TCP(Transmission Controll Protocol)와 UDP(User Datagram Protocol)는 인터넷 상의 데이터를 전송하는 데 사용되는 프로토콜들입니다.   
TCP는 연결 프로토콜로 데이터 전송의 신뢰성을 보장하고 UDP는 비연결형 프로토콜로 최소한의 오버헤드만을 발생시켜 빠른 데이터를 제공합니다.

## TCP

### TCP가 신뢰성 있는 데이터 전송을 보장하는 방법은 무엇인가요?

TCP는 신뢰성 있는 데이터 전송을 보장하기 위해 핸드쉐이크, 데이터 순서화, 오류 검사, 흐름 제어, 혼잡 제어등 여러 메커니즘을 사용합니다.
핸드쉐이크를 통해 연결이 설정되고, 데이터는 순서대로 번호가 매겨져 전송됩니다.   
수신자는 받은 패킷의 순서를 확인하고, 누락된 패킷이 있으면 재전송 요청합니다. (추가로 오류 검사를 통해 데이터의 정확성을 확인함)   
또한, 수신자의 수신 가능 상태를 고려하여 데이터 전송 속도를 조절하고(흐름 제어), 네트워크의 혼잡 상태를 감지하고 조절하여 효율적인 데이터 전송을 지원합니다.(혼잡 제어)

### 흐름 제어와 혼잡 제어는 각각 어떻게 다른가요? 그리고 어떻게 작동하나요?

흐름 제어와 혼잡 제어는 네트워크에서의 데이터 전송을 최적화하는 메커니즘이지만, 목적과 작동 방식이 다릅니다.   
흐름 제어는 송신자와 수신자 간의 데이터 전송 속도를 조절하여 수신자가 처리할 수 있는 속도 이상으로 데이터가 전송되어 오버플로가 발생하는 것을 방지하는 데 목적이 있습니다.(TCP는 윈도우 크기라는 개념을 사용하여 수신자가 한 번에 처리할 수 있는 데이터 양을 조절함)   
혼잡 제어는 네트워크 내의 혼잡 상태를 감지하고 이를 해소합니다. 네트워크 혼잡 상태는 패킷 손실이나 지연 증가로 이어질 수 있으며, TCP는 혼잡 윈도우라는 개념을 사용하여 데이터의 전송 속도를 동적으로 조절합니다.

## UDP

### UDP에서 데이터의 신뢰성을 보장하지 않는 이유는 무엇인가요?

신뢰성을 보장하게 되면 검사하는 만큼의 오버헤드가 발생하게 됩니다. UDP는 고속 전송과 낮은 지연을 목표로 설계되었기 때문에 검사를 의도적으로 생략합니다. 이로 인해 신뢰성보다 고속 전송과 낮은 지연시간이 중요한 실시간 스트리밍, 온라인 게임, 비디오 통신 등에 적합니다.

### UDP는 신뢰성 보장을 아예 하지 않을까요?

UDP 자체는 신뢰성 보장을 하지 않지만 그렇다고 해서 UDP가 신뢰성을 전혀 고려하지 않는다는 의미는 아닙니다. 신뢰성이 중요한 애플리케이션에서는 개발자가 애플리케이션 계층에서 신뢰성을 관리하는 로직을 추가할 수 있습니다.(CheckSum 검사를 통해 최소한의 오류 검사를 함)

## Checksum이란 무엇인가요?

체크섬은 데이터 무결성을 보장하는 데 사용되는 간단한 오류 검사입니다. 데이터 패킷의 바이트 합계를 기반으로 값을 계산한 다음, 패킷과 함께 전송합니다. 수신자는 수신된 데이터에서 새로운 체크섬을 계산하여 전송된 체크섬과 비교합니다. 값이 일치하면 데이터가 손상되지 않은 것으로 간주됩니다. 그렇지 않은 경우 전송 중에 데이터가 손상되었을 수 있음을 나타냅니다.

### TCP와 UDP 중 어느 프로토콜이 Checksum을 수행할까요?

TCP와 UDP 모두 체크섬 작업을 수행합니다. 

### 두 프로토콜 모두 체크섬 작업을 수행해야 하는 이유는 무엇입니까?

네트워크 통신 과정에서 잡음, 신호 저하 등의 이유로 패킷이 손상될 수 있습니다. 체크섬을 통해 데이터 수신 시 데이터 무결성을 보장할 수 있습니다.

### 체크섬 불일치가 감지되면 어떻게 되나요?

체크섬 불일치가 감지되면 프로토콜에 따라 취해지는 조치가 달라집니다.   
TCP에서는 패킷이 손상된 것으로 간주되며 프로토콜에 내장된 메커니즘이 자동으로 패킷 재전송을 요청합니다.   
UDP에서는 프로토콜 자체가 오류를 자동으로 수정하지 않습니다. 체크섬 불일치가 감지되면 일반적으로 패킷이 삭제되며 애플리케이션에 따라 오류 수정, 요청 알고리즘을 구현할 수도 있습니다.

## 왜 HTTP는 TCP를 사용하나요?

HTTP(HyperText Transfer Protocol)는 주로 웹 페이지를 요청하고 전송하는 데 사용되는데, 이 과정에서 전송된 데이터의 정확성과 완전성이 중요합니다. TCP는 연결을 통해 데이터가 순처적으로 에러 없이 전송됨을 보장합니다. TCP의 이러한 특성은 웹 페이지나 파일과 같은 정확하게 전송해야 하는 HTTP에 매우 적합합니다.

## 왜 HTTP/3는 UDP를 기반하는 QUIC 프로토콜을 사용하나요?

QUIC는 UDP 위에 자체적인 신뢰성과 순서 보장 메커니즘을 구현하여 TCP의 연결 설정 지연과 헤드 오브 라인 블로킹 문제를 해결함과 동시에, UDP의 장점을 가집니다.

**연결 설정 지연**: 핸드쉐이크 과정을 완료해야 하는 연결 지향적 특성으로 인해 발생
**헤드 오브 라인 블로킹(Head of Line Blocking)**: 순서대로 데이터 패킷을 처리해야 하는 특성 때문에 발생하는 문제, 순서가 맞을 때까지 뒤따라오는 패킷들의 처리를 지연시킵니다.

## 브라우저가 서버가 TCP나 UDP를 사용하는지 어떻게 알까요?

개발자 도구를 통해 직접 확인할 수도 있고, 일반적으로는 어떤 프로토콜을 사용할지 클라이언트와 서버가 동의해야 하므로 정해진 포트 번호로 추론할 수도 있습니다.
**TCP**: HTTP: 80, HTTPS: 443   
**UDP**: DNS: 53

## 본인이 새로운 통신 프로토콜을 TCP나 UDP를 사용해서 구현한다고 하면, 어떤 기준으로 프로토콜을 선택하시겠어요?

데이터의 정확한 도착과 신뢰성이 중요하다면 TCP, 속도와 오버헤드를 최소화할 필요가 있다면 UDP를 사용할 거 같습니다.

# DHCP가 무엇인지 설명해 주세요.

DHCP(Dynamic Host Configuration Protocol)는 네트워크 상의 장치들이 자동으로 IP 주소와 다른 네트워크 설정을 받을 수 있도록 해주는 네트워크 프로토콜입니다. DHCP를 사용하면 네트워크 관리자가 각 장치를 수동으로 IP 주소를 할당할 필요 없이, 네트워크 장치들이 자동으로 IP 주소를 할당 받고 네트워크에 접속할 수 있게 됩니다.

## DHCP 작동 방식

1. **IP 주소 요청**: 네트워크에 새로운 장치가 연결되면, DHCP Discover 메시지를 네트워크 상에 브로드캐스트합니다. 이는 DHCP 서버에게 IP 주소를 요청하는 신호입니다.
2. **IP 주소 제안**: DHCP 서버가 이 요청을 받으면, 사용 가능한 IP 주소 중 하나를 선택하고, 해당 장치에 DHCP Offer 메시지를 전송하여 IP 주소를 제안합니다.
3. **IP 주소 요청 확인**: 장치는 제안된 IP 주소를 수락하고, DHCP Request 메시지를 서버에 보내 해당 주소를 공식적으로 요청합니다.
4. **IP 주소 할당**: DHCP 서버는 DHCP Acknowledgement 메시지를 장치에 보내, IP 주소 할당을 확정지으며, 이와 함께 서브넷 마스크, 기본 게이트웨이, DNS 서버 주소 등 네트워크 설정 정보도 함께 제공합니다.

## DHCP 단점

**보안 취약성**: DHCP 서버는 네트워크 내의 모든 장치에 IP 주소를 동적으로 할당합니다. 악의적인 사용자가 가짜 DHCP 서버를 네트워크에 설정할 경우, 잘못된 IP를 할당하거나 트래픽을 가로챌 수 있습니다.(Man-In-The-Middle(MitM)라고 부름)
**IP주소 고갈**: DHCP 서버에서 할당할 수 있는 IP 주소 풀이 한정되어 있습니다. 많은 장치가 네트워크에 동시에 연결되어 IP 주소를 요청할 경우, 사용 가능한 IP 주소가 고갈되어, 새로운 장치가 네트워크에 접속하지 못할 수 있습니다.
**네트워크 성능**: 네트워크가 커지고 장치가 많아질수록 DHCP Discover와 같은 DHCP 관련 메시지들이 네트워크 트래픽을 증가시킬 수 있습니다. 네트워크가 자주 연결되고 끊어지는 환경에서 DHCP 트래픽 증가로 네트워크 성능에 부정적인 영향을 줄 수 있습니다.

## DHCP는 몇 계층 프로토콜인가요?

DHCP는 클라이언트가 서버로부터 IP 주소와 기타 구성 매개변수를 가져오도록 하는 애플리케이션 계층 프로토콜입니다.   

## DHCP에서 UDP를 사용하는 이유가 무엇인가요?

DHCP는 장치가 처음 네트워크에 연결되고 네트워크의 다른 장치와 통신하기 위해 IP 구성 정보를 빠르게 가져와야 합니다. 이를 충족하기 위해 UDP를 사용합니다.   
신뢰성이 떨어질 수 있지만 DHCP는 큰 문제가 되지 않습니다. DHCP는 패킷 손실이 최소화되는 로컬 네트워크에서 이루어지고, 특정 시간 내에 응답이 수신되지 않을 경우 요청을 재전송하는 등 안정성을 보장하기 위한 자체 메커니즘이 통합되어 있습니다.
또한, 클라이언트가 처음 연결할 땐 IP주소가 존재하지 않아 IP 대상으로 연결하는 TCP를 사용할 수 없고, DHCP의 브로드캐스트를 의존합니다.

## DHCP에서, IP 주소 말고 추가로 제공해주는 정보가 있나요?

IP 주소 말고도 서브넷 마스크, 기본 게이트웨이, DNS 서버 주소 및 IP 주소 임대시간과 같은 기타 구성 매개변수도 제공합니다.

**서브넷마스크**   
서브넷 마스크는 네트워크 부분과 IP 주소의 호스트 부분을 결정합니다. 이 정보를 통해 통신하려는 다른 장치가 동일한 로컬 네트워크에 있는지 다른 네트워크의 장치에 도달하려는지 식별할 수 있습니다. 서브넷 마스크를 통해 효율적인 라우팅을 보장하여 네트워크의 불필요한 트래픽을 줄입니다.

**기본 게이트웨이**
기본 게이트웨이는 네트워크로 연결된 컴퓨터가 다른 네트워크나 인터넷에 있는 컴퓨터로 정보를 보내는데 사용하는 액세스 포인트 또는 IP 라우터 역할을 합니다.   
대상 IP 주소가 로컬 네트워크 외부에 있는 경우 장치는 데이터를 기본 게이트웨이로 보낸 다음, 데이터를 대상으로 라우팅합니다. 서로 다른 네트워크에 있는 장치 간 통신을 허용하거나 인터넷에 액세스하는 데 필수입니다.

**DNS 서버 주소**
Private IP Address

## DHCP의 유효기간은 얼마나 긴가요?

일반적으로 24시간에서 며칠까지지만 더 짧게 가져갈 수도 있습니다.

### DHCP의 유효기간을 짧게 가져가는 경우

공용 와이파이 네트워크와 같이 장치 회전율이 높은 환경에서는 짧은 유효기간을 설정하여 IP 주소를 신속하게 재활용합니다. 이를 통해 IP 주소 고갈 가능성을 줄입니다.

### DHCP는 IP 주소 고갈을 어떻게 처리하나요?

DHCP는 임대가 만료된 장치 또는 네트워크 연결이 끊어진 장치에서 IP 주소를 회수하여 IP 주소 소진을 처리합니다. 그런 다음 이러한 IP 주소를 네트워크 액세스를 요청하는 새 장치에 재할당합니다.

### DHCP 임대 갱신은 어떻게 진행되나요?

DHCP 임대 갱신은 현재 임대가 만료되기 전에(일반적으로 임대 기간의 중간 지점) 장치가 임대 갱신 프로세스를 시작하도록 하여 작동합니다. 장치는 DHCPREQUEST 메시지를 DHCP 서버에 보내 현재 IP 주소 갱신을 요청합니다. 서버가 승인하면 DHCPACK 메시지를 보내 갱신과 새 임대 기간을 확인합니다. 이 프로세스는 수동 재구성 없이도 장치에 대한 지속적인 네트워크 연결을 보장하는 데 도움이 됩니다.

## 3-Way Handshake에 대해 설명해 주세요.

3 웨이 핸드쉐이크는 TCP에서 클라이언트와 서버 간의 연결을 설정하는 데 사용되는 방법입니다.

**SYN**   
클라이언트가 SYN(동기화)이 1로 설정된 TCP 세그먼트를 설정하고 시퀀스 번호를 시작함을 나타냅니다.

**SYN-ACK**   
서버는 SYN이 1로 설정되고 ACK(승인)이 1로 설정된 TCP 세그먼트를 응답하고여 클라이언트의 SYN을 승인하고 자체 시퀀스 번호를 제공합니다.

**ACK**   
클라이언트는 서버에 ACK를 보내 서버의 SYN-ACK를 승인하고 핸드쉐이크를 완료하고 연결을 설정합니다.
   
SYN, ACK 등의 정보는 TCP 세그먼트의 헤더를 통해 전송합니다.

### 2-Way Handshaking을 사용하지 않는 이유를 설명해 주세요.

3번째 단계가 없다면 서버의 승인이 클라이언트에 의해 수신되었는지 확인할 수 없어 잠재적인 문제가 발생할 수 있습니다.

### SYN Flooding에 대해 설명해주세요.

TCP 연결 설정 프로세스를 이용한 일종의 디도스 공격입니다. 공격자는 다수의 SYN 패킷을 대상 서버에 전송하지만 3-웨이 핸드쉐이크는 완료하지 못합니다.(응답하지 않거나 다른 소스 IP를 매핑하여) 이로 인해 불완전한 연결로 가득차게 되고 서버는 가짜 요청을 처리하느라 합법적인 요청에 응답할 수 없게 됩니다.

### 위의 질문과 모순될 수 있지만 3-Way Handshake의 속도 문제로 인해 이동 횟수를 줄이기 위해 0-RTT 기술이 널리 적용됩니다. 이것이 어떻게 가능한지?

0-RTT(Zero Round Trip Time)는 왕복 시간 없는 연결 재시작 기능입니다.